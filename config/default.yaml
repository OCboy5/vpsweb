# Vox Poetica Studio Web - Main Configuration
# Simplified: Workflow orchestration only (model configs moved to models.yaml & task_templates.yaml)

# Workflow mode selection: 'reasoning', 'non_reasoning', or 'hybrid'
workflow_mode: "hybrid"  # Default to balanced approach

# Translation Strategy Dials (Global Configuration)
translation_strategy:
  # Cultural adaptation approach
  adaptation_level: "balanced"  # options: "foreignizing" | "balanced" | "domesticating"

  # How to handle repetitions in the original poem
  repetition_policy: "strict"  # options: "strict" | "adaptive"

  # Policy for semantic additions (when translator adds meaning not in source)
  additions_policy: "forbid"  # options: "forbid" | "allow_with_alt"

  # Prosody and rhythm target for translation
  prosody_target: "free verse, cadence-aware"  # e.g., "free verse, cadence-aware", "preserve rhyme", "free verse"

  # Optional exemplars (few-shot examples) - typically left empty
  few_shots: ""  # Can contain example translations for few-shot learning

# Workflow orchestration using task templates (no model-specific configs)
workflow:
  name: "vox_poetica_translation"
  version: "2.0.0"

  # Pure Reasoning Workflow Configuration
  reasoning_workflow:
    initial_translation:
      task_template: "initial_translation_reasoning"
      required_fields: ["initial_translation", "initial_translation_notes"]
    editor_review:
      task_template: "editor_review_reasoning"
      required_fields: ["editor_suggestions"]
    translator_revision:
      task_template: "translator_revision_reasoning"
      required_fields: ["final_translation", "revised_translation_notes"]

  # Pure Non-Reasoning Workflow Configuration
  non_reasoning_workflow:
    initial_translation:
      task_template: "initial_translation_nonreasoning"
      required_fields: ["initial_translation", "initial_translation_notes"]
    editor_review:
      task_template: "editor_review_nonreasoning"
      required_fields: ["editor_suggestions"]
    translator_revision:
      task_template: "translator_revision_nonreasoning"
      required_fields: ["final_translation", "revised_translation_notes"]

  # Hybrid Workflow Configuration (Non-Reasoning → Reasoning → Non-Reasoning)
  hybrid_workflow:
    initial_translation:
      task_template: "initial_translation_nonreasoning"
      required_fields: ["initial_translation", "initial_translation_notes"]
    editor_review:
      task_template: "editor_review_reasoning"
      required_fields: ["editor_suggestions"]
    translator_revision:
      task_template: "translator_revision_nonreasoning"
      required_fields: ["final_translation", "revised_translation_notes"]

storage:
  output_dir: "outputs"
  format: "json"
  include_timestamp: true
  pretty_print: true
  workflow_mode_tag: true  # Include workflow mode in output filename

  # Default output directories
  wechat_articles_dir: "outputs/wechat_articles"
  cache_dir: "outputs/.cache"

logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  file: "vpsweb.log"
  max_file_size: 10485760  # 10MB
  backup_count: 5
  log_reasoning_tokens: true  # Track reasoning model token usage

# Performance monitoring
monitoring:
  track_latency: true
  track_token_usage: true
  track_cost: true  # Estimate API costs
  compare_workflows: true  # Enable A/B comparison

# System-wide settings
system:
  # Token management
  token_refresh_buffer: 300  # seconds (5 minutes) - refresh token before expiry
  default_token_expiry: 7200  # seconds (2 hours) - default WeChat token expiry

  # Preview lengths for logs and UI
  preview_lengths:
    input_preview: 100  # characters
    response_preview: 200  # characters
    editor_preview: 200  # characters

  # Default messages
  default_digest: "诗歌翻译作品，展现中英文学之美，传递文化精髓。"